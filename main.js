(()=>{"use strict";function e(e){const t=document.querySelector(".add-container");e.target.closest(".block-container").children[2].classList.remove("visually-hidden"),e.target.closest("div").remove(t)}const t=document.querySelector("#toDo").querySelector(".add"),n=document.querySelector("#progress").querySelector(".add"),l=document.querySelector("#done").querySelector(".add");function o(){if(0===localStorage.length)return;const e=JSON.parse(localStorage.toDo),o=JSON.parse(localStorage.inProgress),s=JSON.parse(localStorage.doNe);for(let n=0;n<e.length;n+=1){const l=e[n],o=document.createElement("li");o.classList.add("li-card"),o.textContent=l;const s=document.createElement("span");s.classList.add("card-close","visually-hidden"),s.textContent="✖",o.insertAdjacentElement("afterbegin",s),t.appendChild(o)}for(let e=0;e<o.length;e+=1){const t=o[e],l=document.createElement("li");l.classList.add("li-card"),l.textContent=t;const s=document.createElement("span");s.classList.add("card-close","visually-hidden"),s.textContent="✖",l.insertAdjacentElement("afterbegin",s),n.appendChild(l)}for(let e=0;e<s.length;e+=1){const t=s[e],n=document.createElement("li");n.classList.add("li-card"),n.textContent=t;const o=document.createElement("span");o.classList.add("card-close","visually-hidden"),o.textContent="✖",n.insertAdjacentElement("afterbegin",o),l.appendChild(n)}}let s,d,a=null,c=null,r=null,i=null;document.addEventListener("mousedown",(e=>{if(e.target.classList.contains("li-card")){e.preventDefault(),document.body.style.cursor="grabbing",e.target.querySelector(".card-close").classList.add("visually-hidden");const{top:t,left:n}=e.target.getBoundingClientRect();a=e.target,s=a.offsetWidth,d=a.offsetHeight,r=e.pageX-n,i=e.pageY-t,c=e.target.cloneNode(!0),c.style.backgroundColor="#ede3e3",c.style.width=a.offsetWidth,c.style.height=a.offsetHeight,a.classList.add("dragged"),e.target.parentNode.insertBefore(c,e.target.nextElementSibling),a.style.left=e.pageX-r+"px",a.style.top=e.pageY-i+"px",a.style.width=`${s}px`,a.style.height=`${d}px`}})),document.addEventListener("mousemove",(e=>{if(e.preventDefault(),!a)return;const t=document.elementFromPoint(e.clientX,e.clientY),{top:n}=t.getBoundingClientRect();t.classList.contains("li-card")?e.pageY>window.scrollY+n+t.offsetHeight/2?t.closest(".dnd-todo").insertBefore(a,t.nextElementSibling):t.closest(".dnd-todo").insertBefore(a,t):t.classList.contains("dnd-todo")&&!t.querySelector(".li-card")&&t.append(a),a.style.left=e.pageX-r+"px",a.style.top=e.pageY-i+"px"})),document.addEventListener("mouseleave",(e=>{a&&(e.preventDefault(),c.parentNode.removeChild(c),a.classList.remove("dragged"),a.style="",c=null,a=null)})),document.addEventListener("mouseup",(e=>{if(a){const o=document.elementFromPoint(e.clientX,e.clientY),{top:s}=o.getBoundingClientRect();o.classList.contains("li-card")?e.pageY>window.scrollY+s+o.offsetHeight/2?o.closest(".dnd-todo").insertBefore(a,o.nextElementSibling):o.closest(".dnd-todo").insertBefore(a,o):o.classList.contains("dnd-todo")&&!o.querySelector(".li-card")&&o.append(a),c.parentNode.removeChild(c),function(){const e=[];if(null===t)return;for(const n of t.querySelectorAll(".li-card"))e.push(n.textContent.slice(1));localStorage.toDo=JSON.stringify(e);const o=[];if(null===n)return;for(const e of n.querySelectorAll(".li-card"))o.push(e.textContent.slice(1));localStorage.inProgress=JSON.stringify(o);const s=[];if(null!==l){for(const e of l.querySelectorAll(".li-card"))s.push(e.textContent.slice(1));localStorage.doNe=JSON.stringify(s)}}(),a.classList.remove("dragged"),a.style="",c=null,a=null}})),o(),document.querySelector("#container").addEventListener("click",(t=>{if(t.preventDefault(),t.target.matches(".add-card")){const e=document.createElement("div");e.classList.add("add-container");const n=document.createElement("textarea");n.classList.add("input-text"),n.placeholder="Enter a title for this card...",e.appendChild(n);const l=document.createElement("button");l.classList.add("button"),l.textContent="Add Card",e.appendChild(l);const o=document.createElement("span");o.classList.add("close"),o.textContent="✖",e.appendChild(o),t.target.closest("div").appendChild(e),t.target.classList.add("visually-hidden"),n.focus()}if(t.target.matches(".close")&&e(t),t.target.matches(".button")){const n=t.target.closest(".block-container").children[1],l=t.target.closest(".add-container").querySelector(".input-text"),o=document.createElement("li");o.classList.add("li-card"),o.textContent=l.value;const s=document.createElement("span");s.classList.add("card-close","visually-hidden"),s.textContent="✖",o.insertAdjacentElement("afterBegin",s),n.appendChild(o),e(t)}t.target.matches(".card-close")&&t.target.closest(".li-card").remove()})),e(),window.addEventListener("load",o())})();